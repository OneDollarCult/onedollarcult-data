<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="winners_title">Победители — OneDollarCult</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet" />
  <style>
    :root{ --violet:#8b31ff; --card:#1b0235; --btn:#ff0044; }
    *{ box-sizing:border-box; }
    body{
      margin:0; color:#fff; background: radial-gradient(1100px 520px at 50% -10%, #21004a 0%, #0b0016 60%, #000 100%);
      font-family:'Russo One', system-ui, arial, sans-serif;
    }

    /* TOPBAR (как на index) */
    .topbar{ position:relative; padding:22px 16px 10px; display:flex; justify-content:center; align-items:center; }
    nav{ display:flex; gap:18px; align-items:center; justify-content:center; flex-wrap:wrap; }
    nav a{ color:#fff; text-decoration:none; font-size:20px }
    nav a:hover{ text-shadow:0 0 10px #fff3 }
    .right{ position:absolute; top:14px; right:16px; display:flex; align-items:center; gap:10px; }
    .lang span{ display:none } /* убираем слово */
    select{ background:#1f033d; color:#fff; border:1px solid #7740ff; border-radius:9px; padding:6px 10px; font-family:'Russo One', sans-serif; }

    /* LAYOUT */
    .wrap{ max-width:1100px; margin:8px auto 60px; padding:0 14px; }
    .panel{
      background:var(--card);
      border-radius:18px;
      box-shadow:0 0 0 1px var(--violet), 0 0 22px #8b31ff40;
      padding:18px 16px 22px;
    }
    h1{
      margin:8px 6px 14px; line-height:1.1;
      font-size:clamp(24px,6.2vw,44px);
      text-shadow:0 0 14px #f0f;
      text-align:center;
    }
    .meta{
      margin:0 6px 14px; color:#cfcbe8; font-size:clamp(14px,3.2vw,18px);
    }
    .btn{
      display:block; width:100%; max-width:520px; margin:0 auto 14px; text-align:center;
      background:var(--btn); color:#fff; text-decoration:none; border:0; cursor:pointer;
      font-family:'Russo One', system-ui, arial, sans-serif;
      font-size:clamp(18px,4.2vw,22px); padding:12px 18px; border-radius:14px;
      box-shadow:0 0 16px #ff3b73; transition:.2s;
    }
    .btn:hover{ background:#ff1f5c; box-shadow:0 0 22px #ff5b8e }

    /* TABLE WRAP: чтобы на мобилках ничего не «ехало» */
    .table-wrap{
      margin-top:10px; background:#13022c; border-radius:14px; overflow:hidden;
      box-shadow: inset 0 0 0 1px #7a27ff, 0 0 14px #7a27ff55;
    }
    .scroll-x{ overflow-x:auto; -webkit-overflow-scrolling:touch; }
    table{ width:100%; border-collapse:collapse; min-width:640px; } /* min-width — чтобы колонки читались; контейнер скроллится */
    thead th{
      text-align:left; padding:14px 16px;
      font-size:clamp(14px,3.6vw,18px); color:#dcd7f2; border-bottom:1px solid #4c248a;
    }
    tbody td{
      padding:14px 16px; font-size:clamp(14px,3.6vw,18px); border-bottom:1px solid #30115f;
      color:#fff;
    }
    tbody tr:last-child td{ border-bottom:0 }

    .empty{ padding:16px; color:#bdb9d1; font-size:clamp(14px,3.8vw,18px) }

    /* MOBILE TWEAKS */
    @media (max-width: 680px){
      nav{ gap:14px }
      nav a{ font-size:18px }
      .right{ top:10px; right:12px }
      .meta{ text-align:left }
    }
  </style>
  <script src="public/i18n.js"></script>
</head>
<body>
  <div class="topbar">
    <nav>
      <a href="index.html" data-i18n="nav_home">Главная</a>
      <a href="rules.html" data-i18n="nav_rules">Правила</a>
      <a href="philosophy.html" data-i18n="nav_philosophy">Философия</a>
    </nav>
    <div class="right">
      <div class="lang">
        <span data-i18n="lang_label">Язык</span>
        <select id="langSel">
          <option value="ru">RU</option>
          <option value="en">EN</option>
        </select>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="panel">
      <h1 data-i18n="winners_title">Победители Ритуалов</h1>
      <div class="meta"><span data-i18n="total_winners" data-n="0">Всего победителей: 0</span></div>

      <button class="btn" id="refreshBtn" data-i18n="refresh_btn">Обновить</button>

      <div class="table-wrap">
        <div class="scroll-x">
          <table>
            <thead>
              <tr>
                <th data-i18n="col_avatar">Аватар</th>
                <th data-i18n="col_user">Участник</th>
                <th data-i18n="col_amount">Сумма выигрыша</th>
                <th data-i18n="col_date">Дата</th>
              </tr>
            </thead>
            <tbody id="winnersBody">
              <tr id="winnersEmpty"><td class="empty" colspan="4" data-i18n="winners_none">Ещё не было ритуалов.</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    // язык
    const sel = document.getElementById('langSel');
    sel.value = LANG;
    sel.addEventListener('change', e=>I18N.setLang(e.target.value));

    // Если у вас уже есть логика подгрузки победителей — оставьте её.
    // Ниже — мягкий «крючок»: если глобальная функция loadWinners существует, вызовем её.
    if (typeof window.loadWinners === 'function') {
      window.loadWinners({
        refreshBtn: document.getElementById('refreshBtn'),
        totalLabel: document.querySelector('.meta [data-i18n="total_winners"]'),
        body: document.getElementById('winnersBody'),
        empty: document.getElementById('winnersEmpty')
      });
    }
  </script>
</body>
</html>
