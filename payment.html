<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Оплата — OneDollarCult</title>
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
  <style>
    :root{ --bg1:#0b0016; --bg2:#14022b; --panel:#1f033d; --neon:#8000ff; --accent:#ff0044; --text:#fff; }
    *{ box-sizing:border-box }
    body{
      margin:0; padding:30px 20px;
      font-family:'Russo One',sans-serif; color:var(--text);
      background: radial-gradient(1100px 600px at 50% -10%, var(--bg2), transparent 60%),
                  radial-gradient(1600px 800px at 50% 110%, var(--bg2), transparent 60%),
                  #000;
      text-align:center;
    }
    nav{
      display:flex; gap:18px; align-items:center; justify-content:center;
      margin-bottom:24px;
    }
    nav a{ color:#fff; text-decoration:none; font-size:20px; opacity:.9 }
    .lang{
      margin-left:12px; position:fixed; top:18px; right:18px;
      background:#220044;border:2px solid #5b1bd1;color:#fff;border-radius:12px;
      padding:8px 12px;font-size:16px;
    }
    .container{
      margin:60px auto 0; max-width:820px;
      background:var(--panel); border-radius:16px; padding:34px 24px;
      border:1px solid #5b1bd1; box-shadow:0 0 28px #5b1bd166;
    }
    h1{ margin:0 0 8px; font-size:34px; text-shadow:0 0 10px #f0f }
    .addr{ font-size:22px; color:#00ffd0; word-break:break-all; margin:8px 0 18px; cursor:pointer }
    .qr-wrap{ display:flex; justify-content:center; margin:10px 0 20px }
    #qrcode{ padding:10px; background:#0d001d; border-radius:14px; box-shadow:0 0 20px #5b1bd166 }
    .hint{ color:#bcb9d9; opacity:.85; margin:8px 0 24px; line-height:1.5 }
    .btn{
      display:inline-block; background:var(--accent); color:#fff; border:none; cursor:pointer;
      font-size:22px; padding:16px 28px; border-radius:16px; box-shadow:0 0 18px #ff0044aa;
    }
    .btn:hover{ transform:translateY(-1px) }
  </style>
  <!-- QRCode.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>
</head>
<body>
  <nav>
    <a href="index.html" data-i18n="nav_home">Главная</a>
    <a href="rules.html" data-i18n="nav_rules">Правила</a>
  </nav>
  <select class="lang" id="langSel">
    <option value="ru">RU</option>
    <option value="en">EN</option>
  </select>

  <div class="container">
    <h1 data-i18n="title">Оплати 1 USDT (TRC-20)</h1>
    <div id="payText" style="opacity:.9" data-i18n="send_exact">Отправь ровно <b>1 USDT</b> на адрес:</div>

    <div id="address" class="addr">TX5iuanUcs1YubXrFyDtM3L7Jvhr4vWyij</div>

    <div class="qr-wrap"><div id="qrcode"></div></div>

    <div class="hint" data-i18n="hint">
      Отсканируй QR или нажми на адрес, чтобы скопировать. После перевода нажми кнопку ниже.
    </div>

    <button class="btn" id="checkBtn" data-i18n="btn_check">Я перевёл(а) — проверить</button>
  </div>

  <script>
    // ===== i18n =====
    const I18N = {
      ru: {
        'nav_home':'Главная', 'nav_rules':'Правила',
        'title':'Оплати 1 USDT (TRC-20)', 'send_exact':'Отправь ровно <b>1 USDT</b> на адрес:',
        'hint':'Отсканируй QR или нажми на адрес, чтобы скопировать. После перевода нажми кнопку ниже.',
        'btn_check':'Я перевёл(а) — проверить'
      },
      en: {
        'nav_home':'Home', 'nav_rules':'Rules',
        'title':'Pay 1 USDT (TRC-20)', 'send_exact':'Send exactly <b>1 USDT</b> to:',
        'hint':'Scan the QR or click the address to copy. After sending, press the button below.',
        'btn_check':'I sent — check'
      }
    };
    const langSel = document.getElementById('langSel');
    function applyLang(lc){
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        el.innerHTML = I18N[lc][key] || el.innerHTML;
      });
    }
    const startLang = (new URLSearchParams(location.search).get('lang')||localStorage.getItem('lang')||'ru');
    langSel.value = startLang; applyLang(startLang);
    langSel.addEventListener('change', ()=>{
      localStorage.setItem('lang', langSel.value);
      applyLang(langSel.value);
    });

    // ===== адрес и QR (БЕЗ каких-либо префиксов!) =====
    const ADDRESS = 'TX5iuanUcs1YubXrFyDtM3L7Jvhr4vWyij';
    const addrEl = document.getElementById('address');
    addrEl.textContent = ADDRESS;

    // Копирование по клику
    addrEl.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(ADDRESS); addrEl.style.opacity=.7; setTimeout(()=>addrEl.style.opacity=1, 500); }
      catch(e){}
    });

    // Генерим QR ТОЛЬКО с голым адресом (без 'tron:' и прочих схем)
    window.addEventListener('load', ()=>{
      new QRCode(document.getElementById("qrcode"), {
        text: ADDRESS,
        width: 260, height: 260, correctLevel: QRCode.CorrectLevel.M
      });
    });

    // Проверка оплаты (у тебя уже был обработчик)
    document.getElementById('checkBtn').addEventListener('click', ()=>{
      // просто кидаем на join.html — там у тебя логика проверки
      window.location.href = 'join.html';
    });
  </script>
</body>
</html>
